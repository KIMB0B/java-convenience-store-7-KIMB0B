# java-convenience-store-precourse

## 기능 목록
- [x] 파싱 기능 추가
  - [x] 파일을 불러와 알맞게 파싱하는 기능 구현
- [x] 상품 클래스 생성
  - [x] products.md의 상품 목록을 가져와 클래스 초기화
  - [x] 상품 목록을 가져오는 메서드 생성
- [x] 프로모션 클래스 생성
  - [x] promotions.md의 프로모션 목록을 가져와 클래스 초기화
- [x] 상품 클래스 기능 추가
  - [x] 상품의 프로모션을 Promotion 클래스를 통해 관리
  - [x] 프로모션 적용 가능 여부 관리
  - [x] 프로모션 기간에 포함되는지 확인
  - [x] 멤버십 여부를 입력받아 상품의 최종 금액을 계산
  - [x] 무료로 더 받을 수 있는지 여부 확인
  - [x] 프로모션이 적용되지 않는 개수 고지하기
- [x] 출력 (OutputView) 클래스 구현
  - [x] 보유 상품 목록 출력
  - [x] 프로모션이 있는 물품은 재고가 있고 프로모션이 없는 물품은 목록에 없으면 재고 없음으로 목록에 추가하기
  - [x] 영수증 출력
- [x] 입력 (InputView) 클래스 구현
  - [x] 상품 구입 목록 입력
  - [x] 멤버십 여부 입력
  - [x] 구매할 다른 상품 여부 입력
- [x] 예외 처리 구현
  - [x] 잘못된 입력에 대한 `IllegalArgumentException` 예외 처리
- [x] main 함수 구현
  - [x] 무한 루프로 어플리케이션 실행
  - [x] 입력한 상품 구매 진행
  - [x] 구매 완료 후 영수증 출력
- [ ] 테스트 코드 작성
  - [ ] 상품 재고 처리 테스트
  - [ ] 프로모션 적용 테스트
  - [ ] 멤버십 할인 테스트
  - [ ] 입력 예외 처리 테스트

## 정리

#### 새롭게 배운 점
- Singleton Pattern<br>
  객체를 하나만 생성하고 이를 공유하여 사용하는 패턴을 `싱글톤 패턴`이라고 합니다. 이를 통해 객체를 생성할 때마다 메모리를 할당하는 것을 방지할 수 있습니다.<br>
사실 싱글톤 패턴 자체를 처음 들어본 것은 아니지만, Spring에서 Bean을 통해 적용하는 것이 아닌 직접 필요성을 느껴서 적용한 것은 처음이었습니다.<br>
이번 미션에서는 Product, Promotion 클래스에 적용하여 객체를 하나만 생성하고 이를 공유하여 사용하였습니다.
- BufferedReader<br>
    `BufferedReader`는 입력 스트림으로부터 문자를 읽어 들이는 클래스입니다. 이를 통해 파일을 읽어들이는 기능을 구현하였습니다.<br>
    이전에는 `Console.readLine()`을 통해 콘솔의 입력에 대한 데이터만 가져오는 기능을 구현하였는데, 이번에는 BufferedReader를 사용하여 마크다운과 같은 파일의 값 읽어들이는 방법을 알게 되었습니다.

#### 과제를 진행하며 느낀 점
이번 과제는 매우 뜻깊은 경험을 할 수 있어 좋았고 동시에 아쉽기도 한 경험을 할 수 있는 한주였습니다.<br>
만족한 부분은 리팩토링을 진행하면서 자연스럽게 Repository와 Service의 필요성을 느끼고 역할을 나누어 수정하게 되었다는 점입니다.<br>
이전에 사실 Repository를 만들고 Service를 만들고 했던 것은 그저 패턴에서 그렇게 만들라니까 하게되는 느낌이었는데, 커지고 복잡해지는 프로그램을 만들게 되면서 유지보수가 힘들어지다 보니 자연스레 이와같이 구현하게 되었습니다.<br>
그리고 Repository를 통해 싱글톤 패턴으로 데이터가 저장되는 공간을 만들고 이를 공유해서 사용하다 보니 데이터 초기화가 안 되어있던 문제들을 직면하면서 싱글톤 패턴의 주의점도 몸소 느끼게 되었고, 이런 부분을 더 신경써서 생각하게 될 수 있는 계기가 되었던 것 같습니다.<br>
아쉬운점은 요구사항에 완벽하지 못하게 구현을 하게 되었다는 점입니다. 특히 멤버십이 있는지 물어보는 시기 등 사용자의 주문 후 추가 주문들이 이루어지는 부분에서 요구사항에 맞춰 구현하기에 복잡함을 느끼고 만족스럽게 완성하진 못했다는 느낌을 받았습니다.<br>
프레임워크를 사용하지 않고 처음부터 내 프로그램을 쌓아 올리는 느낌이 너무 만족스러워서 결과는 만족스럽지 못했지만 과정은 매우 만족하는 한주였습니다.

#### 많은 시간을 투자한 부분
리팩토링을 하면서 Repository와 Service를 만들고 역할을 더 세분화하여 나누는 과정에서 많은 시간을 소요하게 되었습니다.<br>
처음에는 이와 같이 만들 생각을 못하고 그저 지금 코드가 점점 알아보기 어려워지고 복잡해진다는 것을 느끼고 이에 대한 해결책이 필요하다고만 생각했습니다.<br>
그래서 이를 해결할 방법을 찾아보다가 Application 클래스에 여러 다양한 기능들을 하는 메서드가 집합되어 있다는 것을 느끼고 이를 Service로 각각 product, promotion, order에서 각 역할에 맞는 기능들을 수행하도록 나누었습니다.<br>
그 후에 좀 정리가 된 상태에서 코드를 다시 보니 마크다운 파일에서 가져온 데이터를 Repository에 저장하고 이를 Service에서 사용하도록 바꾸면 더 깔끔해질 것이라고 생각했습니다.<br>
그래서 이 과정을 구현 로직에 대해선 수정하진 않았지만 코드의 전체적인 구조를 전부 수정하면서 시간이 오래 걸렸고, 이 과정에서 많은 시간을 투자하게 되었습니다.

#### 더 고민할 부분
다른 분들이 구현한 이전 과제들을 보면 Controller를 구현한 분들도 많이 보이던데, API구현이야 URI에 따라 기능을 수행하도록 구현하기 위해 만드는 것인데 현재 과제에선 어떤 필요성이 있는 것인지 잘 모르겠어서 Controller는 따로 구현하지 않고 Application에서 Service의 기능들을 호출하는 방식으로 구현하였습니다.
그래서 이 부분에 대해 더 고민해보고, 필요성을 느끼게 되면 추가적으로 구현해보는 것도 좋을 것 같습니다.

## 4주차까지의 회고
이번주는 신기하게 편의점 알바를 하는중에 편의점 과제를 맞이하게 되었습니다. 시작 전에는 많이 사용한 포스기 로직을 만드는 것이라 생각하고 마지막주지만 간단하게 끝날 수 있겠다 착각했지만... 현실은 역시 호락호락하지 않았던 것 같습니다.<br>
이번주의 저의 과제 진행에서의 중요 포인트는 위에서 적었다시피 Repository와 Service의 구현 즉, 역할 분리였습니다. 그래서 이번에는 에러를 throw하는 부분도 ErrorHandler라는 클래스로 관리하여 호출하도록 만들었습니다.<br>
이를 진행하면서 또 알게 된 사실은 static 메서드를 싱글톤으로 관리하는 클래스에서 만들지 않아야 한다는 것이었습니다. 생각없이 static으로 만들었다가 IDE에서 warning을 너무 많이 띄워서 당황했던 기억이 있습니다ㅎㅎㅎㅎ<br>
그리고 커뮤니티를 보다 보니 TDD에 대한 얘기가 많이 나오길래 TDD방식으로 진행해볼까 생각했지만 당장 구현부터 막막하다보니 선듯 새로운 시도를 하기 어려웠던 것 같습니다.<br>
편의점 알바를 하고 있던던 알바생 관점에서 내가 평소 사용하던 이 포스기의 메커니즘도 정말 많은 고민 끝에 나온 결과이구나 새삼스럽게 느끼고 역시 다른 많은 개발자들 존경스럽다고 느꼈습니다.<br>